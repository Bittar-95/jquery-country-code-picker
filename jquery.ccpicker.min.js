(function(a){if(typeof define==='function'&&define.amd){define(['jquery'],a)}else if(typeof module==='object'&&module.exports){a(require('jquery'))}else{a(jQuery)}}(function($,f,g,h){"use strict";var j="ccPicker";var k={countryCode:"LT",dialCodeFieldName:"phoneCode",dataUrl:"data.json"};function CcPicker(c,d){var e=this;this.element=c;this.options=$.extend({},k,d);this._defaults=k;this._name=j;this._list={};this._ccData={};this._ccPicker={};this._ccDialCodeTrackerField={};this.init();function setCountryByPhoneCode(a){var b=e.findCountryByPhoneCode(e,a);e._ccPicker.html(e.createCountryListItem(b.code,b.phoneCode));e._ccDialCodeTrackerField.val(b.phoneCode)}function setCountryByCode(a){var b=e.findCountryByCountryCode(e,a);e._ccPicker.html(e.createCountryListItem(b.code,b.phoneCode));e._ccDialCodeTrackerField.val(b.phoneCode)}return{setCountryByPhoneCode:setCountryByPhoneCode,setCountryByCode:setCountryByCode}}$.extend(CcPicker.prototype,{init:function(){var c=this;this.loadCountryData(c);var a=this.findCountryByCountryCode(c,this.options.countryCode);this._ccPicker=$('<div class="cc-picker cc-picker-code-select-enabled">').insertBefore(this.element);this._ccDialCodeTrackerField=$('<input>').attr({type:'hidden',id:this.element.id+"_"+this.options.dialCodeFieldName,name:this.element.name+"_"+this.options.dialCodeFieldName,value:a.phoneCode}).insertAfter(this.element);this._ccPicker.prepend(this.createCountryListItem(this.options.countryCode.toLowerCase(),a.phoneCode));this._ccPicker.on("click",function(){$.isEmptyObject(c._list)?c.createCountryList(c):c.destroyCountryList(c)})},loadCountryData:function(e){$.ajax({dataType:'json',url:e.options.dataUrl,type:'get',async:false,success:function(a){e._ccData=a}})},findCountryByPhoneCode:function(e,a){return $.grep(e._ccData,function(o){return o.phoneCode.toUpperCase()===a.toUpperCase()})[0]},findCountryByCountryCode:function(e,a){return $.grep(e._ccData,function(o){return o.code.toUpperCase()===a.toUpperCase()})[0]},createCountryList:function(e){var c=e._ccPicker.css("z-index")==="auto"?0:Number(e._ccPicker.css("z-index"))+10;e._list=$("<ul/>",{"class":"cc-picker-code-list"}).appendTo("body");e._list.css({top:e._ccPicker.offset().top+e._ccPicker.outerHeight(),left:e._ccPicker.offset().left,"z-index":c});$.each(e._ccData,function(a,b){var l=$("<li>",{text:b.countryName}).appendTo(e._list);$(l).data("countryItem",b);$(l).prepend(e.createCountryListItem(b.code,b.phoneCode));$(l).on("click",function(){e.selectCountry(e,$(this));e.destroyCountryList(e)})})},destroyCountryList:function(e){e._list.remove();e._list={}},selectCountry:function(e,c){var i=$(c).data("countryItem");e._ccPicker.html(e.createCountryListItem(i.code,i.phoneCode));e._ccDialCodeTrackerField.val(i.phoneCode)},createCountryListItem:function(a,b){return'<div class="cc-picker-flag '+a.toLowerCase()+'"></div><span class="cc-picker-code">'+b+'</span> '}});$.fn.CcPicker=function(a){if(typeof arguments[0]==='string'){var b=arguments[0];var c=Array.prototype.slice.call(arguments,1);var d;this.each(function(){if($.data(this,'plugin_'+j)&&typeof $.data(this,'plugin_'+j)[b]==='function'){d=$.data(this,'plugin_'+j)[b].apply(this,c)}else{throw new Error('Method '+b+' does not exist on jQuery.'+j);}});if(d!==h){return d}else{return this}}else if(typeof a==="object"||!a){return this.each(function(){if(!$.data(this,'plugin_'+j)){$.data(this,'plugin_'+j,new CcPicker(this,a))}})}}}));